{% extends 'base/base.html' %}
{% block contenido %}

<div class="card shadow mb-4">
  <h5 class="card-header bg-gradient-primary text-white" style="background-color: #0b3873;">
    Editar Bien Nacional: {{ form.instance.numero_inventario }}
  </h5>
  <div class="card-body" style="position: relative;z-index: 0;background: rgba(220, 218, 218, 0.5);border-radius: 10px;backdrop-filter: blur(10px);box-shadow: 0 8px 32px rgba(0,0,0,0.5);">
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      {{ form.non_field_errors }}

      <div class="row mb-3">
        <div class="col-md-4">
          <label for="{{ form.nombre_bien.id_for_label }}">Nombre del Bien:</label>
          {{ form.nombre_bien }}
          {% if form.nombre_bien.errors %}
            <div class="text-danger">{{ form.nombre_bien.errors }}</div>
          {% endif %}
        </div>
        
        <div class="col-md-4">
          <label for="{{ form.serial.id_for_label }}">Serial:</label>
          {{ form.serial }}
          {% if form.serial.errors %}
            <div class="text-danger">{{ form.serial.errors }}</div>
          {% endif %}
        </div>

        <div class="col-md-4">
          <label for="{{ form.numero_modelo.id_for_label }}">Numero del Modelo:</label>
          {{ form.numero_modelo }}
          {% if form.numero_modelo.errors %}
            <div class="text-danger">{{ form.numero_modelo.errors }}</div>
          {% endif %}
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-4">
          <label for="{{ form.objeto_gasto.id_for_label }}">Objeto de Gasto:</label>
          {{ form.objeto_gasto }}
          {% if form.objeto_gasto.errors %}
            <div class="text-danger">{{ form.objeto_gasto.errors }}</div>
          {% endif %}
        </div>
        <div class="col-md-4">
          <label for="{{ form.categoria.id_for_label }}">Categoría:</label>
          {{ form.categoria }}
          {% if form.categoria.errors %}
            <div class="text-danger">{{ form.categoria.errors }}</div>
          {% endif %}
        </div>
        <div class="col-md-4">
          <label for="{{ form.subcategoria.id_for_label }}">Subcategoría:</label>
          {{ form.subcategoria }}
          {% if form.subcategoria.errors %}
                    <div class="text-danger">
                        {{ form.subcategoria.errors }}
                    </div>
          {% endif %}
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-4">
          <label for="{{ form.unidad_medida.id_for_label }}">Unidad de Medida:</label>
          {{ form.unidad_medida }}
          {% if form.unidad_medida.errors %}
                    <div class="text-danger">
                        {{ form.unidad_medida.errors }}
                    </div>
          {% endif %}
        </div>
        <div class="col-md-4">
          <label for="{{ form.manufacturera.id_for_label }}">Manufacturera:</label>
          {{ form.manufacturera }}
          {% if form.manufacturera.errors %}
                    <div class="text-danger">
                        {{ form.manufacturera.errors }}
                    </div>
          {% endif %}
        </div>
        <div class="col-md-4">
          <label for="{{ form.fabricante.id_for_label }}">Fabricante:</label>
          {{ form.fabricante }}
          {% if form.fabricante.errors %}
                    <div class="text-danger">
                        {{ form.fabricante.errors }}
                    </div>
          {% endif %}
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-4">
          <label for="{{ form.compania.id_for_label }}">Compañía:</label>
          {{ form.compania }}
          {% if form.compania.errors %}
                    <div class="text-danger">
                        {{ form.compania.errors }}
                    </div>
          {% endif %}
        </div>
        <div class="col-md-4">
          <label for="{{ form.ubicacion.id_for_label }}">Ubicación:</label>
          {{ form.ubicacion }}
          {% if form.ubicacion.errors %}
                    <div class="text-danger">
                        {{ form.ubicacion.errors }}
                    </div>
          {% endif %}
        </div>
        <div class="col-md-4">
          <label for="{{ form.proveedor.id_for_label }}">Proveedor:</label>
          {{ form.proveedor }}
          {% if form.proveedor.errors %}
                    <div class="text-danger">
                        {{ form.proveedor.errors }}
                    </div>
          {% endif %}
        </div>
        
      </div>

      <div class="row mb-3">
        <div class="col-md-4">
          <label for="{{ form.fecha_compra.id_for_label }}">Fecha de Compra:</label>
          {{ form.fecha_compra }}
          {% if form.fecha_compra.errors %}
                    <div class="text-danger">
                        {{ form.fecha_compra.errors }}
                    </div>
          {% endif %}
        </div>
        <div class="col-md-4">
          <label for="{{ form.costo_compra.id_for_label }}">Costo de Compra:</label>
          {{ form.costo_compra }}
          {% if form.costo_compra.errors %}
                    <div class="text-danger">
                        {{ form.costo_compra.errors }}
                    </div>
          {% endif %}
        </div>
        <div class="col-md-4">
          <label for="{{ form.numero_orden.id_for_label }}">Número de Orden:</label>
          {{ form.numero_orden }}
          {% if form.numero_orden.errors %}
                    <div class="text-danger">
                        {{ form.numero_orden.errors }}
                    </div>
          {% endif %}
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-4">
          <label for="{{ form.numero_factura.id_for_label }}">Número de Factura:</label>
          {{ form.numero_factura }}
          {% if form.numero_factura.errors %}
                    <div class="text-danger">
                        {{ form.numero_factura.errors }}
                    </div>
          {% endif %}
        </div>
        <div class="col-md-4">
          <label for="{{ form.estado_fisico.id_for_label }}">Estado Físico:</label>
          {{ form.estado_fisico }}
          {% if form.estado_fisico.errors %}
                    <div class="text-danger">
                        {{ form.estado_fisico.errors }}
                    </div>
          {% endif %}
        </div>
        <div class="col-md-4">
          <label for="{{ form.imagen.id_for_label }}">Imagen:</label><br>
          {{ form.imagen }}
          {% if form.instance.imagen %}
            <img src="{{ form.instance.imagen.url }}" alt="Imagen" class="img-thumbnail mt-2" style="max-width:110px;max-height:110px;">
          {% endif %}
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-4">
          <label for="{{ form.notas.id_for_label }}">Notas:</label>
          {{ form.notas }}
          {% if form.notas.errors %}
                    <div class="text-danger">
                        {{ form.notas.errors }}
                    </div>
          {% endif %}
        </div>
        <div class="col-md-4">
          <label for="{{ form.numero_inventario.id_for_label }}">Numero de Inventario (DELICADO):</label>
          {{ form.numero_inventario }}
          {% if form.numero_inventario.errors %}
                    <div class="text-danger">
                        {{ form.numero_inventario.errors }}
                    </div>
          {% endif %}
        </div>
      </div>


      <button type="submit" class="btn btn-primary">Guardar</button>
      <a href="{% url 'bien_detalle:desagrupado' form.instance.nombre_bien form.instance.objeto_gasto.id form.instance.categoria.id form.instance.subcategoria.id %}" class="btn btn-danger">Cancelar</a>
    </form>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.1.0-rc.0/js/select2.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function(){
                $('.select2').select2({
                    theme: 'classic',
                    width: '100%',
                    placeholder: 'Selecciona una opción',
                    allowClear: true,
                    language: {
                      noResults: function() { return 'No se encontraron resultados'; }
                    },
                });
                $('.select2-multiple').select2({
                    theme: 'classic',
                    width: '100%',
                    placeholder: 'Selecciona una o más opciones',
                    language: {
                      noResults: function() { return 'No se encontraron resultados'; }
                    },
                    allowClear: true,
                });
                
            });
        </script>

{% endblock %}
