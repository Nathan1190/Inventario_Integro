{% extends 'base/base.html' %}
{% block contenido %}

  <!-- CDN CSS de intl-tel-input -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/css/intlTelInput.css"
  />


   

<div class="card mb-4">
    <h5 class="card-header bg-gradient-success text-white">Crear Nueva Categoria</h5>
    <div class="card-body">
            <form method="post">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="">Nombre:</label>
                    {{ form.nombre }}

                    {% if form.nombre.errors %}
                    <div class="text-danger">
                        {{ form.nombre.errors }}
                    </div>
                    {% endif %}

                </div>
                <div class="form-group">
                    <label for="">Descripcion:</label>
                    {{ form.descripcion }}

                    {% if form.descripcion.errors %}
                    <div class="text-danger">
                        {{ form.descripcion.errors }}
                    </div>
                    {% endif %}
                    
                </div>

                
                
                <button type="submit" class="btn btn-primary">Guardar</button>
            </form>
            <div class="table table-striped"></div>
    <a href="{% url 'categorias:home_categorias' %}" class="btn btn-danger">Cancelar</a>
        </div>
        </div>
    {% block javascript %}
  {{ block.super }}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"></script>
  

  <script>
    document.addEventListener('DOMContentLoaded', function(){
      const input = document.querySelector('#id_contacto');
      if (!input) return;

      const iti = window.intlTelInput(input, {
        initialCountry: 'hn',        // <— fuerza +504
        separateDialCode: true,      
        utilsScript: 'https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js'
      });

      // Al enviar, reemplaza el valor por el número E.164 completo
      input.form.addEventListener('submit', () => {
        input.value = iti.getNumber();
      });
    });
  </script>
{% endblock %}


{% endblock %}